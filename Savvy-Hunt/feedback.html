<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback - Savvy Hunt 2025</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['"Plus Jakarta Sans"', 'sans-serif'] },
                    colors: {
                        brand: { 50:'#fff7ed', 100:'#ffedd5', 400:'#fb923c', 500:'#f97316', 600:'#ea580c', 900:'#7c2d12' }
                    },
                    animation: { 'blob': 'blob 7s infinite' },
                    keyframes: {
                        blob: {
                            '0%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
                            '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },
                            '100%': { transform: 'translate(0px, 0px) scale(1)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #fff7ed;
            background-attachment: fixed;
            color: #1e293b;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 10px 40px -10px rgba(249, 115, 22, 0.1), inset 0 0 20px rgba(255, 255, 255, 0.5);
        }

        .input-glass {
            background: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
            color: #334155;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.02);
        }
        .input-glass:focus {
            background: rgba(255, 255, 255, 0.95);
            border-color: #f97316;
            box-shadow: 0 0 0 4px rgba(249, 115, 22, 0.1);
            outline: none;
        }

        .btn-orange-lux {
            background: linear-gradient(135deg, #ea580c 0%, #f97316 100%);
            box-shadow: 0 10px 20px -10px rgba(234, 88, 12, 0.5);
            transition: all 0.3s ease;
        }
        .btn-orange-lux:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 25px -10px rgba(234, 88, 12, 0.6);
            filter: brightness(1.1);
        }

        /* --- FIXED SLIDER STYLES (Rounded Pill) --- */
        input[type=range] {
            -webkit-appearance: none; /* Removes default webkit styles */
            appearance: none;
            width: 100%;
            height: 24px; /* Height of the pill */
            border-radius: 9999px; /* Force fully rounded edges */
            background: #e5e7eb; /* Fallback */
            outline: none;
            margin: 10px 0;
            cursor: pointer;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1); /* Inner shadow for depth */
            border: 2px solid white; /* Clean border */
        }

        /* Thumb (The handle you drag) */
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #ffffff;
            cursor: grab;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2), 0 0 0 4px rgba(249, 115, 22, 0.1);
            border: 3px solid #f97316;
            margin-top: -6px; /* Center the thumb vertically */
            transition: transform 0.1s ease;
        }

        input[type=range]::-moz-range-thumb {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #ffffff;
            cursor: grab;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            border: 3px solid #f97316;
            transition: transform 0.1s ease;
        }

        input[type=range]:active::-webkit-slider-thumb {
            transform: scale(1.1);
            background: #f97316;
            border-color: white;
        }

        @keyframes pop {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); opacity: 1; }
        }
        .animate-pop { animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col selection:bg-brand-500 selection:text-white">

    <div class="fixed top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none">
        <div class="absolute top-[-10%] right-[-5%] w-96 h-96 bg-brand-100 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob"></div>
        <div class="absolute top-[-10%] left-[-10%] w-96 h-96 bg-orange-100 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000"></div>
    </div>

    <nav class="w-full max-w-3xl mx-auto px-6 py-8 flex justify-between items-center z-10">
        <div class="flex flex-col">
            <span class="text-[10px] font-extrabold text-brand-600 tracking-[0.2em] uppercase bg-white/50 px-2 py-0.5 rounded-full self-start mb-1 backdrop-blur-sm border border-brand-100">Savvy Hunt 2025</span>
            <h1 class="text-xl font-extrabold text-slate-900 tracking-tight">Feedback</h1>
        </div>
        
        <a href="index.html" class="group flex items-center gap-2 bg-white/60 hover:bg-white px-4 py-2.5 rounded-full text-xs font-bold text-slate-600 hover:text-brand-600 transition shadow-sm hover:shadow-md hover:-translate-y-0.5 backdrop-blur-md border border-white/50">
            <i class="fa-solid fa-arrow-left group-hover:-translate-x-1 transition-transform"></i> 
            <span>Back to Home</span>
        </a>
    </nav>

    <main class="flex-grow w-full max-w-3xl mx-auto px-4 pb-24 z-10">
        
        <div class="text-center mb-10 space-y-3">
            <div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-brand-50 to-white text-brand-500 mb-2 shadow-[0_8px_30px_rgb(0,0,0,0.04)] border border-white">
                <i class="fa-regular fa-comments text-3xl"></i>
            </div>
            <h2 class="text-4xl font-black text-slate-900 tracking-tight">How did it go?</h2>
            <p class="text-slate-600 font-medium max-w-md mx-auto leading-relaxed">
                We're keeping it real. Tell us what you loved and what we should fix.
            </p>
        </div>

        <form id="feedbackForm" class="space-y-6">
            
            <div class="glass-panel rounded-[2rem] p-8 text-center relative overflow-hidden group hover:shadow-lg transition-shadow duration-500">
                <div class="flex flex-col items-center justify-center gap-2 mb-8 h-16">
                    <div id="rating-emoji" class="text-6xl filter drop-shadow-md transition-transform duration-300 transform hover:scale-110 cursor-default">üëã</div>
                    <p id="rating-text" class="text-brand-600 font-bold text-sm uppercase tracking-wider mt-2">Rate your experience</p>
                </div>
                
                <input type="hidden" name="rating" id="rating-input" required>
                
                <div class="px-2 sm:px-6 mb-4 relative">
                    <input type="range" id="rating-slider" min="1" max="5" value="3" step="0.01">
                    
                    <div class="flex justify-between text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-4 px-1 pointer-events-none">
                        <span>Nah</span>
                        <span>Meh</span>
                        <span>Mid</span>
                        <span>Good</span>
                        <span>Epic</span>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="relative group">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-brand-400">
                        <i class="fa-regular fa-user"></i>
                    </div>
                    <input type="text" name="name" placeholder="Name (Optional)" class="w-full rounded-2xl pl-11 pr-4 py-4 text-sm input-glass font-medium placeholder:text-slate-400">
                </div>
                
                <div class="relative group">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-brand-400">
                        <i class="fa-solid fa-layer-group"></i>
                    </div>
                    <input type="text" name="class" placeholder="Department / Class (e.g. XII-A)" class="w-full rounded-2xl pl-11 pr-4 py-4 text-sm input-glass font-medium placeholder:text-slate-400">
                </div>
            </div>

            <div class="glass-panel rounded-[2rem] p-6 sm:p-8 space-y-6">
                
                <div class="space-y-2">
                    <label class="flex items-center gap-2 text-sm font-bold text-slate-700">
                        <div class="w-6 h-6 rounded-full bg-rose-100 text-rose-500 flex items-center justify-center text-xs shadow-sm"><i class="fa-solid fa-heart"></i></div>
                        Highlights
                    </label>
                    <textarea name="liked" rows="3" class="w-full rounded-2xl px-5 py-3 text-sm input-glass resize-none font-medium placeholder:text-slate-400" placeholder="What was the best part?"></textarea>
                </div>

                <div class="space-y-2">
                    <label class="flex items-center gap-2 text-sm font-bold text-slate-700">
                        <div class="w-6 h-6 rounded-full bg-amber-100 text-amber-500 flex items-center justify-center text-xs shadow-sm"><i class="fa-solid fa-lightbulb"></i></div>
                        Improvements
                    </label>
                    <textarea name="improve" rows="3" class="w-full rounded-2xl px-5 py-3 text-sm input-glass resize-none font-medium placeholder:text-slate-400" placeholder="What can we do better next time?"></textarea>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div class="space-y-2">
                        <label class="text-xs font-bold text-slate-500 uppercase tracking-wider pl-1">Technical Issues</label>
                        <textarea name="tech" rows="2" class="w-full rounded-2xl px-5 py-3 text-sm input-glass resize-none font-medium placeholder:text-slate-400" placeholder="Any lag or bugs?"></textarea>
                    </div>

                     <div class="space-y-2">
                        <label class="text-xs font-bold text-slate-500 uppercase tracking-wider pl-1">Anything Else</label>
                        <textarea name="extra" rows="2" class="w-full rounded-2xl px-5 py-3 text-sm input-glass resize-none font-medium placeholder:text-slate-400" placeholder="Shoutouts?"></textarea>
                    </div>
                </div>

            </div>

            <button id="submitBtn" type="submit" class="w-full btn-orange-lux text-white font-bold rounded-2xl py-4 flex justify-center items-center gap-3 text-lg tracking-tight group">
                <span>Submit Feedback</span>
                <i class="fa-solid fa-paper-plane text-sm group-hover:translate-x-1 transition-transform"></i>
            </button>

        </form>

        <div class="mt-12 text-center">
             <div class="inline-flex items-center gap-3 opacity-60">
                <span class="w-1.5 h-1.5 rounded-full bg-slate-300"></span>
                <span class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">Student Council 2025</span>
                <span class="w-1.5 h-1.5 rounded-full bg-slate-300"></span>
             </div>
        </div>

    </main>

    <div id="successModal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-slate-900/30 backdrop-blur-md p-4 animate-in fade-in duration-300">
        <div class="bg-white/90 backdrop-blur-xl border border-white/60 rounded-[2.5rem] p-8 max-w-sm w-full text-center shadow-2xl relative overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-orange-400 to-rose-400"></div>

            <div class="w-20 h-20 bg-green-100 text-green-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm animate-bounce">
                <i class="fa-solid fa-check text-3xl"></i>
            </div>
            
            <h3 class="text-2xl font-black text-slate-900 mb-2">Feedback Sent!</h3>
            <p class="text-slate-600 text-sm mb-8 font-medium">Thanks for keeping it real. We appreciate you.</p>
            
            <div class="flex flex-col gap-3">
                 <a href="index.html" class="block w-full bg-slate-900 text-white font-bold rounded-xl py-3.5 hover:bg-slate-800 transition shadow-lg shadow-slate-900/10">
                    Back to Home
                </a>
                <button onclick="document.getElementById('successModal').classList.add('hidden'); document.getElementById('successModal').classList.remove('flex');" class="block w-full text-slate-500 hover:bg-slate-50 font-bold rounded-xl py-3.5 transition">
                    Close
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- 1. TELEGRAM CONFIGURATION (PASTE KEYS HERE) ---
            const BOT_TOKEN = "8458855833:AAEDZtijKPSV9hfD12UVFBp65ogaVyrqy8M"; 
            const CHAT_ID = "7168988866";     

            // --- 2. SLIDER LOGIC ---
            const slider = document.getElementById('rating-slider');
            const ratingInput = document.getElementById('rating-input');
            const ratingText = document.getElementById('rating-text');
            const ratingEmoji = document.getElementById('rating-emoji');
            
            const feedbackStates = [
                { text: "Slide to rate", emoji: "üëã" }, 
                { text: "Not my vibe", emoji: "üòî" },      
                { text: "Could be better", emoji: "üòê" },  
                { text: "It was okay", emoji: "üôÇ" },      
                { text: "Pretty good!", emoji: "üòÉ" },     
                { text: "Absolutely Legendary!", emoji: "üî•" } 
            ];

            let currentVal = parseFloat(slider.value); 
            ratingInput.value = Math.round(currentVal);

            function updateRatingUI(val) {
                const discreteIndex = Math.round(val);
                if (feedbackStates[discreteIndex]) {
                    const newState = feedbackStates[discreteIndex];
                    if (ratingText.textContent !== newState.text) {
                        ratingText.textContent = newState.text;
                        ratingEmoji.textContent = newState.emoji;
                        ratingEmoji.classList.remove('animate-pop');
                        void ratingEmoji.offsetWidth; 
                        ratingEmoji.classList.add('animate-pop');
                    }
                }
                
                // GRADIENT PILL LOGIC
                // This updates the background of the slider to look like a liquid bar
                const percentage = ((val - 1) / 4) * 100;
                slider.style.background = `
                    linear-gradient(to right, 
                        #f59e0b 0%, 
                        #f97316 ${percentage / 2}%, 
                        #e11d48 ${percentage}%, 
                        #e5e7eb ${percentage}%, 
                        #e5e7eb 100%)
                `;
            }

            // Init
            updateRatingUI(currentVal);

            slider.addEventListener('input', (e) => {
                const val = parseFloat(e.target.value);
                currentVal = val;
                ratingInput.value = Math.round(val);
                updateRatingUI(val);
            });

            // --- 3. SUBMIT LOGIC ---
            const form = document.getElementById('feedbackForm');
            const submitBtn = document.getElementById('submitBtn');
            const successModal = document.getElementById('successModal');

            form.addEventListener('submit', async (e) => {
                e.preventDefault();

                // UI Loading State
                const originalContent = submitBtn.innerHTML;
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i><span class="ml-2">Sending...</span>';
                submitBtn.classList.add('opacity-80', 'cursor-not-allowed');

                try {
                    const formData = new FormData(form);
                    const rating = parseInt(formData.get('rating'));
                    const stars = "‚≠ê".repeat(rating);
                    
                    // Formatting Message for Telegram
                    const message = `
<b>üìù NEW FEEDBACK</b>

<b>üë§ Identity:</b>
Name: ${formData.get('name') || 'Anonymous'}
Class: ${formData.get('class') || 'Not stated'}

<b>üìä Rating:</b> ${rating}/5  ${stars}

<b>‚ù§Ô∏è Highlights:</b>
${formData.get('liked') || '-'}

<b>üí° Improvements:</b>
${formData.get('improve') || '-'}

<b>üîß Tech Issues:</b>
${formData.get('tech') || '-'}

<b>üì¢ Extra:</b>
${formData.get('extra') || '-'}
`;

                    const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
                    
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            chat_id: CHAT_ID,
                            text: message,
                            parse_mode: 'HTML'
                        })
                    });

                    if (response.ok) {
                        successModal.classList.remove('hidden');
                        successModal.classList.add('flex');
                        form.reset();
                        slider.value = 3;
                        updateRatingUI(3);
                        ratingInput.value = 3;
                    } else {
                        throw new Error('Telegram API failed');
                    }

                } catch (error) {
                    console.error("Submission Error:", error);
                    alert("Could not send. Check internet or Bot Token.");
                } finally {
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = originalContent;
                    submitBtn.classList.remove('opacity-80', 'cursor-not-allowed');
                }
            });
        });
    </script>

</body>
</html>